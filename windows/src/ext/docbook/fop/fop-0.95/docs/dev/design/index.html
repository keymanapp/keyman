<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="Apache Forrest" name="Generator">
<meta name="Forrest-version" content="0.9-dev">
<meta name="Forrest-skin-name" content="pelt">
<title>FOP Design: Introduction</title>
<link type="text/css" href="../../skin/basic.css" rel="stylesheet">
<link media="screen" type="text/css" href="../../skin/screen.css" rel="stylesheet">
<link media="print" type="text/css" href="../../skin/print.css" rel="stylesheet">
<link type="text/css" href="../../skin/profile.css" rel="stylesheet">
<script src="../../skin/getBlank.js" language="javascript" type="text/javascript"></script><script src="../../skin/getMenu.js" language="javascript" type="text/javascript"></script><script src="../../skin/fontsize.js" language="javascript" type="text/javascript"></script>
<link rel="shortcut icon" href="../../">
</head>
<body onload="init()">
<script type="text/javascript">ndeSetTextSize();</script>
<div id="top">
<!--+
    |header
    +-->
<div class="header">
<!--+
    |start group logo
    +-->
<div class="grouplogo">
<a href="http://xmlgraphics.apache.org/"><img class="logoImage" alt="Apache XML Graphics" src="../../images/group-logo.gif" title="Apache XML Graphics is responsible for the creation and maintenance of software for managing the conversion of XML formats to graphical output, and the creation and maintenance of related software components, based on software licensed to the Foundation"></a>
</div>
<!--+
    |end group logo
    +-->
<!--+
    |start Project Logo
    +-->
<div class="projectlogo">
<a href="http://xmlgraphics.apache.org/fop/"><img class="logoImage" alt="Apache FOP" src="../../images/logo.jpg" title="Apache FOP (Formatting Objects Processor) is the world's first output independent formatter. Output formats currently supported include PDF, PCL, PS, SVG, XML (area tree representation), Print, AWT, MIF and TXT. The primary output target is PDF."></a>
</div>
<!--+
    |end Project Logo
    +-->
<!--+
    |start Search
    +-->
<div class="searchbox">
<form action="http://www.google.com/search" method="get" class="roundtopsmall">
<input value="xmlgraphics.apache.org" name="sitesearch" type="hidden"><input onFocus="getBlank (this, 'Search the site with google');" size="25" name="q" id="query" type="text" value="Search the site with google">&nbsp; 
                    <input name="Search" value="Search" type="submit">
</form>
</div>
<!--+
    |end search
    +-->
<!--+
    |start Tabs
    +-->
<ul id="tabs">
<li>
<a class="unselected" href="../../index.html">Home</a>
</li>
<li>
<a class="unselected" href="../../0.94/index.html">Version 0.94</a>
</li>
<li>
<a class="unselected" href="../../0.95/index.html">Version 0.95</a>
</li>
<li>
<a class="unselected" href="../../trunk/index.html">FOP Trunk</a>
</li>
<li class="current">
<a class="selected" href="../../dev/index.html">Development</a>
</li>
</ul>
<!--+
    |end Tabs
    +-->
</div>
</div>
<div id="main">
<div id="publishedStrip">
<!--+
    |start Subtabs
    +-->
<div id="level2tabs"></div>
<!--+
    |end Endtabs
    +-->
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<!--+
    |breadtrail
    +-->
<div class="breadtrail">
<a href="http://www.apache.org/">apache.org</a> &gt; <a href="http://xml.apache.org/">XML Federation</a> &gt; <a href="http://xmlgraphics.apache.org/">xmlgraphics.apache.org</a><script src="../../skin/breadcrumbs.js" language="JavaScript" type="text/javascript"></script>
</div>
<!--+
    |start Menu, mainarea
    +-->
<!--+
    |start Menu
    +-->
<div id="menu">
<div onclick="SwitchMenu('menu_1.1', '../../skin/')" id="menu_1.1Title" class="menutitle">About</div>
<div id="menu_1.1" class="menuitemgroup">
<div class="menuitem">
<a href="../../dev/index.html">Basics</a>
</div>
</div>
<div onclick="SwitchMenu('menu_selected_1.2', '../../skin/')" id="menu_selected_1.2Title" class="menutitle" style="background-image: url('../../skin/images/chapter_open.gif');">Design</div>
<div id="menu_selected_1.2" class="selectedmenuitemgroup" style="display: block;">
<div onclick="SwitchMenu('menu_selected_1.2.1', '../../skin/')" id="menu_selected_1.2.1Title" class="menutitle" style="background-image: url('../../skin/images/chapter_open.gif');">About</div>
<div id="menu_selected_1.2.1" class="selectedmenuitemgroup" style="display: block;">
<div class="menupage">
<div class="menupagetitle">Introduction</div>
</div>
</div>
<div onclick="SwitchMenu('menu_1.2.2', '../../skin/')" id="menu_1.2.2Title" class="menutitle">Core Process</div>
<div id="menu_1.2.2" class="menuitemgroup">
<div class="menuitem">
<a href="../../dev/design/startup.html">Startup</a>
</div>
<div class="menuitem">
<a href="../../dev/design/parsing.html">XML Parsing</a>
</div>
<div class="menuitem">
<a href="../../dev/design/fotree.html">FO Tree</a>
</div>
<div class="menuitem">
<a href="../../dev/design/properties.html">Properties</a>
</div>
<div class="menuitem">
<a href="../../dev/design/layout.html">Layout</a>
</div>
<div class="menuitem">
<a href="../../dev/design/breakpos.html">Break Possibility</a>
</div>
<div class="menuitem">
<a href="../../dev/design/areas.html">Area Tree</a>
</div>
<div class="menuitem">
<a href="../../dev/design/renderers.html">Renderers</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.2.3', '../../skin/')" id="menu_1.2.3Title" class="menutitle">Miscellaneous</div>
<div id="menu_1.2.3" class="menuitemgroup">
<div class="menuitem">
<a href="../../dev/design/images.html">Images</a>
</div>
<div class="menuitem">
<a href="../../dev/design/pdf-library.html">PDF Library</a>
</div>
<div class="menuitem">
<a href="../../dev/design/svg.html">SVG</a>
</div>
<div class="menuitem">
<a href="../../dev/design/embedding.html">Embedding</a>
</div>
<div class="menuitem">
<a href="../../dev/design/extending.html">Extending</a>
</div>
<div class="menuitem">
<a href="../../dev/design/optimise.html">Optimisations</a>
</div>
<div class="menuitem">
<a href="../../dev/design/useragent.html">User Agent</a>
</div>
</div>
<div class="menuitem">
<a href="http://wiki.apache.org/xmlgraphics-fop/FOPProjectPages">Unresolved (Wiki)</a>
</div>
<div class="menuitem">
<a href="../../dev/svg.html">SVG</a>
</div>
<div class="menuitem">
<a href="../../dev/extensions.html">Extensions</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.3', '../../skin/')" id="menu_1.3Title" class="menutitle">Develop</div>
<div id="menu_1.3" class="menuitemgroup">
<div class="menuitem">
<a href="../../dev/api-doc.html">API Doc</a>
</div>
<div class="menuitem">
<a href="../../dev/implement.html">Walk-Thru</a>
</div>
<div class="menuitem">
<a href="http://issues.apache.org/bugzilla/buglist.cgi?bug_status=NEW&bug_status=ASSIGNED&bug_status=REOPENED&email1=&emailtype1=substring&emailassigned_to1=1&email2=&emailtype2=substring&emailreporter2=1&bugidtype=include&bug_id=&changedin=&votes=&chfieldfrom=&chfieldto=Now&chfieldvalue=&product=Fop&short_desc=%5BPATCH%5D&short_desc_type=allwordssubstr&long_desc=&long_desc_type=allwordssubstr&bug_file_loc=&bug_file_loc_type=allwordssubstr&keywords=&keywords_type=anywords&field0-0-0=noop&type0-0-0=noop&value0-0-0=&namedcmd=Fop+all&newqueryname=fop+patch+queue&tofooter=1&order=Reuse+same+sort+as+last+time">Patch Queue</a>
</div>
<div class="menuitem">
<a href="../../dev/conventions.html">Conventions</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.4', '../../skin/')" id="menu_1.4Title" class="menutitle">Test</div>
<div id="menu_1.4" class="menuitemgroup">
<div class="menuitem">
<a href="../../dev/testing.html">Testing</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.5', '../../skin/')" id="menu_1.5Title" class="menutitle">Deploy</div>
<div id="menu_1.5" class="menuitemgroup">
<div class="menuitem">
<a href="../../dev/doc.html">Doc Mgmt</a>
</div>
<div class="menuitem">
<a href="../../dev/release.html">Release</a>
</div>
<div class="menuitem">
<a href="http://issues.apache.org/bugzilla/buglist.cgi?bug_status=NEW&bug_status=ASSIGNED&bug_status=REOPENED&email1=&emailtype1=substring&emailassigned_to1=1&email2=&emailtype2=substring&emailreporter2=1&bugidtype=include&bug_id=&changedin=&votes=&chfieldfrom=&chfieldto=Now&chfieldvalue=&product=Fop&short_desc=&short_desc_type=allwordssubstr&long_desc=&long_desc_type=allwordssubstr&bug_file_loc=&bug_file_loc_type=allwordssubstr&keywords=&keywords_type=anywords&field0-0-0=noop&type0-0-0=noop&value0-0-0=&order=bugs.component">Bugs</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.6', '../../skin/')" id="menu_1.6Title" class="menutitle">Resources</div>
<div id="menu_1.6" class="menuitemgroup">
<div class="menuitem">
<a href="../../dev/faq.html">FAQs</a>
</div>
<div class="menuitem">
<a href="../../dev/tools.html">Tools</a>
</div>
<div class="menuitem">
<a href="http://svn.apache.org/viewvc/xmlgraphics/fop">ViewVC</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.7', '../../skin/')" id="menu_1.7Title" class="menutitle">SubPackages</div>
<div id="menu_1.7" class="menuitemgroup">
<div class="menuitem">
<a href="../../dev/rtflib.html">RTFlib</a>
</div>
</div>
<div id="credit">
<hr>
<a href="http://forrest.apache.org/"><img border="0" title="Built with Apache Forrest" alt="Built with Apache Forrest - logo" src="../../images/built-with-forrest-button.png" style="width: 88px;height: 31px;"></a>
</div>
<div id="roundbottom">
<img style="display: none" class="corner" height="15" width="15" alt="" src="../../skin/images/rc-b-l-15-1body-2menu-3menu.png"></div>
<!--+
  |alternative credits
  +-->
<div id="credit2"></div>
</div>
<!--+
    |end Menu
    +-->
<!--+
    |start content
    +-->
<div id="content">
<div title="raw XML" class="xmllink">
<a class="dida" href="index.xml"><img alt="XML - icon" src="../../skin/images/xmldoc.gif" class="skin"><br>
        XML</a>
</div>
<div title="Portable Document Format" class="pdflink">
<a class="dida" href="index.pdf"><img alt="PDF -icon" src="../../skin/images/pdfdoc.gif" class="skin"><br>
        PDF</a>
</div>
<div class="trail">Font size: 
	          &nbsp;<input value="Reset" class="resetfont" title="Reset text" onclick="ndeSetTextSize('reset'); return false;" type="button">      
	          &nbsp;<input value="-a" class="smallerfont" title="Shrink text" onclick="ndeSetTextSize('decr'); return false;" type="button">
	          &nbsp;<input value="+a" class="biggerfont" title="Enlarge text" onclick="ndeSetTextSize('incr'); return false;" type="button">
</div>
<h1>FOP Design: Introduction</h1>
<div id="front-matter">
<div id="minitoc-area">
<ul class="minitoc">
<li>
<a href="#black-box">The Black Box View</a>
</li>
<li>
<a href="#primary-goals">Primary Design Goals</a>
<ul class="minitoc">
<li>
<a href="#pri-goal-conformance">Conformance to the XSL-FO Specification</a>
</li>
<li>
<a href="#pri-goal-unlimited-size">Process Files of Arbitrary Size</a>
</li>
</ul>
</li>
<li>
<a href="#secondary-goals">Secondary Design Goals</a>
<ul class="minitoc">
<li>
<a href="#sec-goal-memory">Minimize Memory Use</a>
</li>
</ul>
</li>
<li>
<a href="#big-picture">The Big Picture View</a>
</li>
<li>
<a href="#vocabulary">Vocabulary</a>
</li>
</ul>
</div>
</div>
    
<div class="note">
<div class="label">Note</div>
<div class="content">The articles in this section pertain mainly to the <em>redesign</em> or <em>trunk</em> line of development.
The redesign is mainly focusing on parts of the layout process (converting the FO tree into the Area Tree).
Therefore other (non-layout) sections in this document are probably largely accurate for the maintenance branch, but should be used with care in that context.</div>
</div>
    
<a name="N10021"></a><a name="black-box"></a>
<h2 class="underlined_10">The Black Box View</h2>
<div class="section">
<p>From a user's standpoint, FOP is a black box that an xml file as input, performs some magic, then creates the desired output:</p>
<table class="ForrestTable" cellspacing="1" cellpadding="4">
        
<caption>FOP from a User's Standpoint</caption>
        
<tr>
          
<th colspan="1" rowspan="1">Process</th>
          <th colspan="1" rowspan="1">Result</th>
        
</tr>
        
<tr>
          
<td colspan="1" rowspan="1">.</td>
          <td colspan="1" rowspan="1">XSL-FO document</td>
        
</tr>
        
<tr>
          
<td colspan="1" rowspan="1">FOP</td>
          <td colspan="1" rowspan="1">Output: PDF, Postscript, Print, etc.</td>
        
</tr>
      
</table>
<p>Although this is simple, it is useful in defining the outer limits of FOP's core processing.
There may be other things going on under FOP's control that are not really part of FOP.
For example, FOP provides a convenience mechanism that takes semantic XML + an XSLT transformation as input, instead of XSL-FO.
This is done outside of FOP's core processing (by Xalan), and it is therefore outside the scope of FOP's design, and outside the scope of the FOP design documents.</p>
</div>
    
<a name="N1005B"></a><a name="primary-goals"></a>
<h2 class="underlined_10">Primary Design Goals</h2>
<div class="section">
<p>A discussion of project design properly begins with a list of the goals of the project.
Out of these goals will flow the design issues and details, and eventually, the implementation.</p>
<a name="N10064"></a><a name="pri-goal-conformance"></a>
<h3 class="underlined_5">Conformance to the XSL-FO Specification</h3>
<p>The current design goal is to reach the "basic" level of conformance, and to have enough flexibility in the design to reach "complete" conformance without major rewriting.
After "basic" conformance is achieved, it is probable that higher levels of conformance will be sought.</p>
<a name="N1006E"></a><a name="pri-goal-unlimited-size"></a>
<h3 class="underlined_5">Process Files of Arbitrary Size</h3>
<p>Except for user storage limitations, the design goal is to be able to process files of any size. In a separate but related issue, the design goal is to be able to process page-sequence elements of any size. (See <a href="fotree.html#recycle">Recycling FO Tree Memory</a> for a discussion of the use of page-sequence as a logical subdivided "chunk" on an FO document).</p>
</div>
    
<a name="N1007D"></a><a name="secondary-goals"></a>
<h2 class="underlined_10">Secondary Design Goals</h2>
<div class="section">
<a name="N10083"></a><a name="sec-goal-memory"></a>
<h3 class="underlined_5">Minimize Memory Use</h3>
<p>Many FOP design decisions revolve around trying to minimize the use of memory.
The primary purpose here is to reduce the amount of data that must be serialized to storage during processing.
Since our primary design goals include the ability to process files of arbitrary size, there is no way to avoid the need to serialize.
However, many FOP users provide web access to documents that are created in real time.
Performance is therefore an important issue in these real-world applications.
To the extent that it can be done so without jeopardizing the primary design goals, FOP developers have identified keeping a small memory footprint as being an important secondary goal.</p>
</div>
    
<a name="N1008E"></a><a name="big-picture"></a>
<h2 class="underlined_10">The Big Picture View</h2>
<div class="section">
<p>With our design goals outlined, we'll now open the Black Box and look at the major processes inside.
FOP has adopted the basic structure of the XSL-FO standard itself as a convenient model for the major processes in FOP. The Result in each row is the input for the next.</p>
<table class="ForrestTable" cellspacing="1" cellpadding="4">
        
<caption>FOP's Big Picture Design</caption>
        
<tr>
          
<th colspan="1" rowspan="1">Process</th>
          <th colspan="1" rowspan="1">Process Result/Input for Next</th>
          <th colspan="1" rowspan="1">Notes</th>
        
</tr>
        
<tr>
          
<td colspan="1" rowspan="1">.</td>
          <td colspan="1" rowspan="1">XSL-FO document</td>
          <td colspan="1" rowspan="1">.</td>
        
</tr>
        
<tr>
          
<td colspan="1" rowspan="1"><a href="parsing.html">Parsing</a></td>
          <td colspan="1" rowspan="1"><a href="fotree.html">FO Tree</a></td>
          <td colspan="1" rowspan="1">.</td>
        
</tr>
        
<tr>
          
<td colspan="1" rowspan="1"><a href="properties.html#refine">Refinement</a></td>
          <td colspan="1" rowspan="1"><a href="properties.html#refined-fo-tree">Refined FO Tree</a></td>
          <td colspan="1" rowspan="1">.</td>
        
</tr>
        
<tr>
          
<td colspan="1" rowspan="1"><a href="layout.html">Layout</a></td>
          <td colspan="1" rowspan="1"><a href="areas.html">Area Tree</a></td>
          <td colspan="1" rowspan="1">Layout and Area Tree are not needed or used for the structural outputs (MIF and RTF), as they are not paginated.</td>
        
</tr>
        
<tr>
          
<td colspan="1" rowspan="1"><a href="renderers.html">Renderer</a></td>
          <td colspan="1" rowspan="1">Output: PDF, Postscript, Print, etc.</td>
          <td colspan="1" rowspan="1">.</td>
        
</tr>
      
</table>
<p>In general, each piece of data will be processed in the same way.
However, some information may be used more than once, and some may be used out of order.
To reduce memory, one process may start before the previous process is completed.</p>
<p>For a detailed discussion of the design of any component, follow its link in the table above.
Each component outlines the design issues which have already been addressed.
These resolution of these design issues is in support of the primary and secondary goals, so they are not necessarily written in stone.
However, most of them have been discussed at length among the developers, and are reasonably well settled.</p>
</div>


    
<a name="N1011E"></a><a name="vocabulary"></a>
<h2 class="underlined_10">Vocabulary</h2>
<div class="section">
<p>This section will attempt to provide information about any jargon used in the design documentation.</p>
<p>There is a rough relationship between terms used to describe the various trees in XSL-FO processing, all of which come from the XML and XSL-FO standards. In the table below, the <em>terms</em> (but not the actual items) in each column are roughly equivalent to each other:</p>
<table class="ForrestTable" cellspacing="1" cellpadding="4">
        
<tr>
          
<th colspan="1" rowspan="1">Tree Concept</th>
          <th colspan="1" rowspan="1">Thing (Noun)</th>
          <th colspan="1" rowspan="1">Descriptive Item (Adjective)</th>
        
</tr>
        
<tr>
          
<td colspan="1" rowspan="1">XML</td>
          <td colspan="1" rowspan="1">Element</td>
          <td colspan="1" rowspan="1">Attribute</td>
        
</tr>
        
<tr>
          
<td colspan="1" rowspan="1">FO Tree</td>
          <td colspan="1" rowspan="1">Object</td>
          <td colspan="1" rowspan="1">Property</td>
        
</tr>
        
<tr>
          
<td colspan="1" rowspan="1">Area Tree</td>
          <td colspan="1" rowspan="1">Area</td>
          <td colspan="1" rowspan="1">Trait</td>
        
</tr>
      
</table>
<ul>
        
<li>
<strong>LM</strong>: Layout Manager.</li>
        
<li>
<strong>PLB</strong>: PropertyListBuilder.</li>
      
</ul>
</div>
  
<p align="right">
<font size="-2">by&nbsp;Keiron Liddle</font>
</p>
<span class="version">
          version 627324</span>
</div>
<!--+
    |end content
    +-->
<div class="clearboth">&nbsp;</div>
</div>
<div id="footer">
<!--+
    |start bottomstrip
    +-->
<div class="lastmodified">
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<div class="copyright">
        Copyright &copy;
         1999-2008 <a href="http://www.apache.org/licenses/">The Apache Software Foundation.</a>
</div>
<div id="logos"></div>
<!--+
    |end bottomstrip
    +-->
</div>
</body>
</html>
