<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="Apache Forrest" name="Generator">
<meta name="Forrest-version" content="0.9-dev">
<meta name="Forrest-skin-name" content="pelt">
<title>FOP Development: Coding Conventions</title>
<link type="text/css" href="../skin/basic.css" rel="stylesheet">
<link media="screen" type="text/css" href="../skin/screen.css" rel="stylesheet">
<link media="print" type="text/css" href="../skin/print.css" rel="stylesheet">
<link type="text/css" href="../skin/profile.css" rel="stylesheet">
<script src="../skin/getBlank.js" language="javascript" type="text/javascript"></script><script src="../skin/getMenu.js" language="javascript" type="text/javascript"></script><script src="../skin/fontsize.js" language="javascript" type="text/javascript"></script>
<link rel="shortcut icon" href="../">
</head>
<body onload="init()">
<script type="text/javascript">ndeSetTextSize();</script>
<div id="top">
<!--+
    |header
    +-->
<div class="header">
<!--+
    |start group logo
    +-->
<div class="grouplogo">
<a href="http://xmlgraphics.apache.org/"><img class="logoImage" alt="Apache XML Graphics" src="../images/group-logo.gif" title="Apache XML Graphics is responsible for the creation and maintenance of software for managing the conversion of XML formats to graphical output, and the creation and maintenance of related software components, based on software licensed to the Foundation"></a>
</div>
<!--+
    |end group logo
    +-->
<!--+
    |start Project Logo
    +-->
<div class="projectlogo">
<a href="http://xmlgraphics.apache.org/fop/"><img class="logoImage" alt="Apache FOP" src="../images/logo.jpg" title="Apache FOP (Formatting Objects Processor) is the world's first output independent formatter. Output formats currently supported include PDF, PCL, PS, SVG, XML (area tree representation), Print, AWT, MIF and TXT. The primary output target is PDF."></a>
</div>
<!--+
    |end Project Logo
    +-->
<!--+
    |start Search
    +-->
<div class="searchbox">
<form action="http://www.google.com/search" method="get" class="roundtopsmall">
<input value="xmlgraphics.apache.org" name="sitesearch" type="hidden"><input onFocus="getBlank (this, 'Search the site with google');" size="25" name="q" id="query" type="text" value="Search the site with google">&nbsp; 
                    <input name="Search" value="Search" type="submit">
</form>
</div>
<!--+
    |end search
    +-->
<!--+
    |start Tabs
    +-->
<ul id="tabs">
<li>
<a class="unselected" href="../index.html">Home</a>
</li>
<li>
<a class="unselected" href="../0.94/index.html">Version 0.94</a>
</li>
<li>
<a class="unselected" href="../0.95/index.html">Version 0.95</a>
</li>
<li>
<a class="unselected" href="../trunk/index.html">FOP Trunk</a>
</li>
<li class="current">
<a class="selected" href="../dev/index.html">Development</a>
</li>
</ul>
<!--+
    |end Tabs
    +-->
</div>
</div>
<div id="main">
<div id="publishedStrip">
<!--+
    |start Subtabs
    +-->
<div id="level2tabs"></div>
<!--+
    |end Endtabs
    +-->
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<!--+
    |breadtrail
    +-->
<div class="breadtrail">
<a href="http://www.apache.org/">apache.org</a> &gt; <a href="http://xml.apache.org/">XML Federation</a> &gt; <a href="http://xmlgraphics.apache.org/">xmlgraphics.apache.org</a><script src="../skin/breadcrumbs.js" language="JavaScript" type="text/javascript"></script>
</div>
<!--+
    |start Menu, mainarea
    +-->
<!--+
    |start Menu
    +-->
<div id="menu">
<div onclick="SwitchMenu('menu_1.1', '../skin/')" id="menu_1.1Title" class="menutitle">About</div>
<div id="menu_1.1" class="menuitemgroup">
<div class="menuitem">
<a href="../dev/index.html">Basics</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.2', '../skin/')" id="menu_1.2Title" class="menutitle">Design</div>
<div id="menu_1.2" class="menuitemgroup">
<div onclick="SwitchMenu('menu_1.2.1', '../skin/')" id="menu_1.2.1Title" class="menutitle">About</div>
<div id="menu_1.2.1" class="menuitemgroup">
<div class="menuitem">
<a href="../dev/design/index.html">Introduction</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.2.2', '../skin/')" id="menu_1.2.2Title" class="menutitle">Core Process</div>
<div id="menu_1.2.2" class="menuitemgroup">
<div class="menuitem">
<a href="../dev/design/startup.html">Startup</a>
</div>
<div class="menuitem">
<a href="../dev/design/parsing.html">XML Parsing</a>
</div>
<div class="menuitem">
<a href="../dev/design/fotree.html">FO Tree</a>
</div>
<div class="menuitem">
<a href="../dev/design/properties.html">Properties</a>
</div>
<div class="menuitem">
<a href="../dev/design/layout.html">Layout</a>
</div>
<div class="menuitem">
<a href="../dev/design/breakpos.html">Break Possibility</a>
</div>
<div class="menuitem">
<a href="../dev/design/areas.html">Area Tree</a>
</div>
<div class="menuitem">
<a href="../dev/design/renderers.html">Renderers</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.2.3', '../skin/')" id="menu_1.2.3Title" class="menutitle">Miscellaneous</div>
<div id="menu_1.2.3" class="menuitemgroup">
<div class="menuitem">
<a href="../dev/design/images.html">Images</a>
</div>
<div class="menuitem">
<a href="../dev/design/pdf-library.html">PDF Library</a>
</div>
<div class="menuitem">
<a href="../dev/design/svg.html">SVG</a>
</div>
<div class="menuitem">
<a href="../dev/design/embedding.html">Embedding</a>
</div>
<div class="menuitem">
<a href="../dev/design/extending.html">Extending</a>
</div>
<div class="menuitem">
<a href="../dev/design/optimise.html">Optimisations</a>
</div>
<div class="menuitem">
<a href="../dev/design/useragent.html">User Agent</a>
</div>
</div>
<div class="menuitem">
<a href="http://wiki.apache.org/xmlgraphics-fop/FOPProjectPages">Unresolved (Wiki)</a>
</div>
<div class="menuitem">
<a href="../dev/svg.html">SVG</a>
</div>
<div class="menuitem">
<a href="../dev/extensions.html">Extensions</a>
</div>
</div>
<div onclick="SwitchMenu('menu_selected_1.3', '../skin/')" id="menu_selected_1.3Title" class="menutitle" style="background-image: url('../skin/images/chapter_open.gif');">Develop</div>
<div id="menu_selected_1.3" class="selectedmenuitemgroup" style="display: block;">
<div class="menuitem">
<a href="../dev/api-doc.html">API Doc</a>
</div>
<div class="menuitem">
<a href="../dev/implement.html">Walk-Thru</a>
</div>
<div class="menuitem">
<a href="http://issues.apache.org/bugzilla/buglist.cgi?bug_status=NEW&bug_status=ASSIGNED&bug_status=REOPENED&email1=&emailtype1=substring&emailassigned_to1=1&email2=&emailtype2=substring&emailreporter2=1&bugidtype=include&bug_id=&changedin=&votes=&chfieldfrom=&chfieldto=Now&chfieldvalue=&product=Fop&short_desc=%5BPATCH%5D&short_desc_type=allwordssubstr&long_desc=&long_desc_type=allwordssubstr&bug_file_loc=&bug_file_loc_type=allwordssubstr&keywords=&keywords_type=anywords&field0-0-0=noop&type0-0-0=noop&value0-0-0=&namedcmd=Fop+all&newqueryname=fop+patch+queue&tofooter=1&order=Reuse+same+sort+as+last+time">Patch Queue</a>
</div>
<div class="menupage">
<div class="menupagetitle">Conventions</div>
</div>
</div>
<div onclick="SwitchMenu('menu_1.4', '../skin/')" id="menu_1.4Title" class="menutitle">Test</div>
<div id="menu_1.4" class="menuitemgroup">
<div class="menuitem">
<a href="../dev/testing.html">Testing</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.5', '../skin/')" id="menu_1.5Title" class="menutitle">Deploy</div>
<div id="menu_1.5" class="menuitemgroup">
<div class="menuitem">
<a href="../dev/doc.html">Doc Mgmt</a>
</div>
<div class="menuitem">
<a href="../dev/release.html">Release</a>
</div>
<div class="menuitem">
<a href="http://issues.apache.org/bugzilla/buglist.cgi?bug_status=NEW&bug_status=ASSIGNED&bug_status=REOPENED&email1=&emailtype1=substring&emailassigned_to1=1&email2=&emailtype2=substring&emailreporter2=1&bugidtype=include&bug_id=&changedin=&votes=&chfieldfrom=&chfieldto=Now&chfieldvalue=&product=Fop&short_desc=&short_desc_type=allwordssubstr&long_desc=&long_desc_type=allwordssubstr&bug_file_loc=&bug_file_loc_type=allwordssubstr&keywords=&keywords_type=anywords&field0-0-0=noop&type0-0-0=noop&value0-0-0=&order=bugs.component">Bugs</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.6', '../skin/')" id="menu_1.6Title" class="menutitle">Resources</div>
<div id="menu_1.6" class="menuitemgroup">
<div class="menuitem">
<a href="../dev/faq.html">FAQs</a>
</div>
<div class="menuitem">
<a href="../dev/tools.html">Tools</a>
</div>
<div class="menuitem">
<a href="http://svn.apache.org/viewvc/xmlgraphics/fop">ViewVC</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.7', '../skin/')" id="menu_1.7Title" class="menutitle">SubPackages</div>
<div id="menu_1.7" class="menuitemgroup">
<div class="menuitem">
<a href="../dev/rtflib.html">RTFlib</a>
</div>
</div>
<div id="credit"></div>
<div id="roundbottom">
<img style="display: none" class="corner" height="15" width="15" alt="" src="../skin/images/rc-b-l-15-1body-2menu-3menu.png"></div>
<!--+
  |alternative credits
  +-->
<div id="credit2"></div>
</div>
<!--+
    |end Menu
    +-->
<!--+
    |start content
    +-->
<div id="content">
<div title="raw XML" class="xmllink">
<a class="dida" href="conventions.xml"><img alt="XML - icon" src="../skin/images/xmldoc.gif" class="skin"><br>
        XML</a>
</div>
<div title="Portable Document Format" class="pdflink">
<a class="dida" href="conventions.pdf"><img alt="PDF -icon" src="../skin/images/pdfdoc.gif" class="skin"><br>
        PDF</a>
</div>
<div class="trail">Font size: 
	          &nbsp;<input value="Reset" class="resetfont" title="Reset text" onclick="ndeSetTextSize('reset'); return false;" type="button">      
	          &nbsp;<input value="-a" class="smallerfont" title="Shrink text" onclick="ndeSetTextSize('decr'); return false;" type="button">
	          &nbsp;<input value="+a" class="biggerfont" title="Enlarge text" onclick="ndeSetTextSize('incr'); return false;" type="button">
</div>
<h1>FOP Development: Coding Conventions</h1>
<div id="front-matter">
<div id="minitoc-area">
<ul class="minitoc">
<li>
<a href="#svn">Subversion Repository</a>
</li>
<li>
<a href="#java">Java</a>
<ul class="minitoc">
<li>
<a href="#java-style">Java Style</a>
</li>
<li>
<a href="#java-checkstyle">Checkstyle</a>
</li>
<li>
<a href="#java-best-practices">Java Best Practices</a>
</li>
<li>
<a href="#java-resources">Resources</a>
</li>
<li>
<a href="#java-links">Related Links</a>
</li>
</ul>
</li>
<li>
<a href="#xml">XML</a>
</li>
</ul>
</div>
</div>
    
<p>Acknowledgement: Some content in this guide was adapted from other Apache projects such as Avalon, Cactus, Turbine and Velocity.</p>
    
<a name="N10014"></a><a name="svn"></a>
<h2 class="underlined_10">Subversion Repository</h2>
<div class="section">
<p>Conventions in this section apply to Repository content, regardless of type:</p>
<ul>
        
<li>Files checked in must conform to the code conventions for that type of file (java files must conform to java requirements, xml to xml requirements, etc.). If a submitted patch does not conform, it is the responsibility of the committer to bring it into conformance before checking it in. Developers submitting patches are encouraged to follow the code conventions to reduce the work load on the committers.</li>
        
<li>To reduce the amount of spurious deltas, all text (non-binary) files checked into SVN must have Unix-style line endings (LF only). Many IDEs and editors (even on non-Unix platforms) have settings that can facilitate this convention.</li>
        
<li>In order to be able to discern commits from a committer from those where a committer applied a patch from a contributor, the commit message must contain a separate line following this pattern: <strong>"Submitted by: [contributor's name] &lt;[contributor's obfuscated e-mail address]&gt;"</strong>. This also helps doing audits on the repository.</li>
      
</ul>
</div>
    
<a name="N1002D"></a><a name="java"></a>
<h2 class="underlined_10">Java</h2>
<div class="section">
<a name="N10033"></a><a name="java-style"></a>
<h3 class="underlined_5">Java Style</h3>
<p>
          In order to facilitate the human reading of FOP source code, 
          reduce churning in code, and prevent disputes, the FOP developers 
          have agreed on a set of coding conventions. The basis of these coding 
          conventions is documented in the 
          <a class="external" href="http://xml.apache.org/source.html">Apache XML Project Guidelines</a>, 
          which requires that <strong>all Java Language source code in the repository 
          must be written in conformance to Sun's</strong> 
          <a class="external" href="http://java.sun.com/docs/codeconv/html/CodeConvTOC.doc.html">Code Conventions for the Java Programming Language</a>.
          In addition, the FOP developers have agreed to other conventions, 
          which are summarized in the following table:</p>
<table class="ForrestTable" cellspacing="1" cellpadding="4">
          
<tr>
            
<th colspan="1" rowspan="1">Convention</th>
            <th colspan="1" rowspan="1">Rationale</th>
            <th colspan="1" rowspan="1">Enforced By</th>
          
</tr>
          
<tr>
            
<td colspan="1" rowspan="1">Every Java source file starts with the Apache licence header.</td>
            <td colspan="1" rowspan="1">Required by Apache.</td>
            <td colspan="1" rowspan="1">checkstyle</td>
          
</tr>
          
<tr>
            
<td colspan="1" rowspan="1">No tabs in content.</td>
            <td colspan="1" rowspan="1">Programmers should not have to adjust the tab settings in their editor to be able to read the source code.</td>
            <td colspan="1" rowspan="1">checkstyle</td>
          
</tr>
          
<tr>
            
<td colspan="1" rowspan="1">Indentation of 4 spaces per level.</td>
            <td colspan="1" rowspan="1">Maximize readability.</td>
            <td colspan="1" rowspan="1">Not enforced</td>
          
</tr>
          
<tr>
            
<td colspan="1" rowspan="1">Comments, identifiers, and project documentation must be in English.
In general, other languages must not be used, except in translated documentation and language-specific i10n files.
            </td>
            <td colspan="1" rowspan="1">To avoid the need for everyone to learn all languages, English has become the standard language for many technology projects, and is the only human language that all FOP developers are expected to know.</td>
            <td colspan="1" rowspan="1">Not enforced</td>
          
</tr>
          
<tr>
            
<td colspan="1" rowspan="1">American English spelling should be used. Alternative spelling and idioms are tolerated, but may be changed by anyone to American.</td>
            <td colspan="1" rowspan="1">Some standard is useful, and American English is widely used and accepted for technology standards and projects.</td>
            <td colspan="1" rowspan="1">Not enforced.</td>
          
</tr>
          
<tr>
            
<td colspan="1" rowspan="1">Fully qualify all import statements (no "import java.util.*")</td>
            <td colspan="1" rowspan="1">Clarity</td>
            <td colspan="1" rowspan="1">checkstyle</td>
          
</tr>
          
<tr>
            
<td colspan="1" rowspan="1">No underscores in variable names except for static finals.</td>
            <td colspan="1" rowspan="1">Upper/lower case distinctions can be made in all other variable names, eliminating the need for artificial word boundaries.</td>
            <td colspan="1" rowspan="1">checkstyle</td>
          
</tr>
          
<tr>
            
<td colspan="1" rowspan="1">Opening brace for a block should be on the same line as its control statement (if, while, etc.).</td>
            <td colspan="1" rowspan="1">Standardization, general preference.</td>
            <td colspan="1" rowspan="1">checkstyle</td>
          
</tr>
          
<tr>
            
<td colspan="1" rowspan="1">Write appropriate javadoc entries for all public and protected classes, methods, and variables.</td>
            <td colspan="1" rowspan="1">Basic API documentation is needed.</td>
            <td colspan="1" rowspan="1">checkstyle</td>
          
</tr>
          
<tr>
            
<td colspan="1" rowspan="1">Personal attribution in the source code, such as @author tags and attribution comments should not be used.
Excepted from this general rule are potentially confusing or wide-ranging changes.
If such changes prove useful over time, the related comments should be removed.</td>
            <td colspan="1" rowspan="1">Personal attribution tends to clutter the code.
The relevant historical information that might be useful for problem-solving is tracked in the code repository.</td>
            <td colspan="1" rowspan="1">Not enforced. Anyone is free to remove such comments.</td>
          
</tr>
        
</table>
<p>For developers that dislike these conventions, one workaround is to develop using their own style, then use a formatting tool like <a class="external" href="http://astyle.sourceforge.net/">astyle</a> (Artistic Style) before committing.</p>
<a name="N10118"></a><a name="java-checkstyle"></a>
<h3 class="underlined_5">Checkstyle</h3>
<p>The java syntax checker "<a class="external" href="http://checkstyle.sourceforge.net">Checkstyle</a>" is used to enforce many of the FOP coding standards.
The standards enforced through Checkstyle are documented in its configuration file (xml-fop/checkstyle.cfg).
The conventions defined in the configuration file are an integral part of FOP's coding conventions, and should not be changed without common consent.
In other words, the configuration file contains additional conventions that are not documented on this page, but are generally accepted as good style within the java community (i.e. they are the default behavior of checkstyle, which the FOP developers have decided to adopt <em>de facto</em>).
Any apparent contradiction between the configuration file and this document should be raised on the fop-dev mailing list so that it can be clarified.</p>
<p>To use the "checkstyle" target in FOP's build process, download the source from the <a class="external" href="http://checkstyle.sourceforge.net">Checkstyle web site</a>, place checkstyle-all-*.jar in the lib directory and call "build checkstyle". Output (in the build directory) includes checkstyle_report.txt and checkstyle_report.xml. If you copy the file contrib/checkstyle-noframes.xsl from Checkstyle into FOP's root directory, you will also get an HTML report.</p>
<p>Checkstyle is probably most useful when integrated into your IDE. See the Checkstyle web site for more information about IDE plugins.</p>
<a name="N10133"></a><a name="java-best-practices"></a>
<h3 class="underlined_5">Java Best Practices</h3>
<p>The following general principles are a distillation of best practice expectations on the FOP project.</p>
<ul>
          
<li>Apply common sense when coding. When coding keep in mind that others will read your code and have to understand it.</li>
          
<li>Readability comes before performance, at least initially.</li>
          
<li>If you can refactor some code to make it more understandable, please do so.</li>
          
<li>Properly document code, especially where it's important.</li>
          
<li>Use interfaces instead of implementations where possible.
This favors a clearer design and makes switching between implementations easier (Examples: List instead of ArrayList/Vector, Map instead of HashMap/Hashtable).</li>


          
<li>Avoid using exceptions for flow control.</li>
          
<li>Try to catch exceptions as much as possible and rethrow higher level exceptions (meaning hiding the low level detailed and putting a message that is more related to the function of your code).</li> 
          
<li>It is important not to lose the stack trace which contains important information.
Use chained exception for that. Avalon Framework provides <a class="external" href="http://jakarta.apache.org/avalon/api/org/apache/avalon/framework/CascadingException.htm">CascadingException</a> (and similar) for this.
Exception class names and stack traces must be treated like gold.
Do whatever is required so that this information is not lost.
Printing error messages to System.err or System.out is useless in a server-side environment where this info is usually lost.</li>
          
<li>Always log the exception at the higher level (i.e. where it is handled and not rethrown).</li> 
          
<li>Try to avoid catching Throwable or Exception and catch specific exceptions instead.</li>
        
</ul>
<a name="N10162"></a><a name="java-resources"></a>
<h3 class="underlined_5">Resources</h3>
<ul>
          
<li>[book on code style] Code Complete by Steve McConnell.</li>
          
<li>[code formatting software] <a class="external" href="http://jrefactory.sourceforge.net">JRefactory</a>.</li>
        
</ul>
<a name="N10176"></a><a name="java-links"></a>
<h3 class="underlined_5">Related Links</h3>
<ul>
          
<li>
<a target="_top" href="http://xmlgraphics.apache.org/repo.html">Apache XML Graphics Code Repositories</a>
</li>
          
<li>
<a class="external" href="http://jakarta.apache.org/site/faqs.html#Coding%20Conventions%20and%20Standards">Jakarta Code Conventions and Standards</a> (see Coding Conventions and Standards section)</li>
        
</ul>
</div>
    
<a name="N1018C"></a><a name="xml"></a>
<h2 class="underlined_10">XML</h2>
<div class="section">
<table class="ForrestTable" cellspacing="1" cellpadding="4">
        
<tr>
          
<th colspan="1" rowspan="1">Convention</th>
          <th colspan="1" rowspan="1">Rationale</th>
          <th colspan="1" rowspan="1">Enforced By</th>
        
</tr>
        
<tr>
          
<td colspan="1" rowspan="1">XML files must always be well-formed. Validation is optional.</td>
          <td colspan="1" rowspan="1">Document integrity</td>
          <td colspan="1" rowspan="1">Not enforced</td>
        
</tr>
        
<tr>
          
<td colspan="1" rowspan="1">No tabs in content.</td>
          <td colspan="1" rowspan="1">Users should not have to adjust tab settings in their editor to be able to read the content.</td>
          <td colspan="1" rowspan="1">Not enforced</td>
        
</tr>
        
<tr>
          
<td colspan="1" rowspan="1">Indentation of 2 spaces per level</td>
          <td colspan="1" rowspan="1">Maximize readability</td>
          <td colspan="1" rowspan="1">Not enforced</td>
        
</tr>
      
</table>
</div>
  
<span class="version">
          version 627324</span>
</div>
<!--+
    |end content
    +-->
<div class="clearboth">&nbsp;</div>
</div>
<div id="footer">
<!--+
    |start bottomstrip
    +-->
<div class="lastmodified">
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<div class="copyright">
        Copyright &copy;
         1999-2008 <a href="http://www.apache.org/licenses/">The Apache Software Foundation.</a>
</div>
<!--+
    |end bottomstrip
    +-->
</div>
</body>
</html>
